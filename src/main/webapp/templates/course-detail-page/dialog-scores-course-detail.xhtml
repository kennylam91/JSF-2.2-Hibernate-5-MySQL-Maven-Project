<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
   xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:p="http://primefaces.org/ui">
<h:head>
   <h:outputStylesheet library="primefaces" name="components.css" />
   <h:outputStylesheet name="primeicons/primeicons.css" library="primefaces" />
   <h:outputStylesheet library="primefaces-omega" name="theme.css" />
   <h:outputStylesheet library="css" name="widget.css" />
   <h:outputStylesheet library="css" name="wpsp-grid.css" />
   <h:outputStylesheet library="css" name="wpsp-resposive.css" />
   <h:outputStylesheet library="css" name="font-awesome.min.css" />
   <h:outputStylesheet library="css" name="template.css" />
   <h:outputStylesheet library="css" name="styles.css" />
</h:head>
<h:body>
   <h:form onkeypress="if (event.keyCode == 13) { return false; }">
      <p:dataTable value="#{courseController.selectedScores}" var="score" id="score_table" widgetVar="cellScores"
         selection="#{courseController.selectedScore}" rowKey="#{score.id}" selectionMode="single">
         <p:ajax event="rowSelect" listener="#{courseController.onRowSelectScoreTable}"
            update="@form:score_table @form:score_input">
         </p:ajax>
         <f:facet name="header">
            <h3>COURSE SCORES</h3>
         </f:facet>
         <p:column headerText="StudentCode">
            <h:outputText value="#{score.studentCode}"></h:outputText>
         </p:column>
         <p:column headerText="FirstName">
            <h:outputText value="#{score.studentFirstname}"></h:outputText>
         </p:column>
         <p:column headerText="LastName">
            <h:outputText value="#{score.studentLastname}"></h:outputText>
         </p:column>
         <p:column headerText="Score">
            <h:outputText id="score_output" value="#{score.score}"></h:outputText>
         </p:column>
         <f:facet name="footer">
            <p:commandButton value="Update" actionListener="#{courseController.updateScores}"></p:commandButton>
            <p:commandButton value="Cancel" process="@this" actionListener="#{courseController.closeCourseScoreDialog}"
               immediate="true">
            </p:commandButton>
         </f:facet>
      </p:dataTable>
      <p:dialog widgetVar="input_score_dlg" resizable="false">
         <h:panelGrid columns="2" cellpadding="5">
            <h:outputLabel for="score_input" value="Input Score:" />
            <p:inputText id="score_input" value="#{courseController.selectedScore.score}" label="score"
               onkeypress="if (event.keyCode == 13) {PF('input_score_dlg').hide();}">
               <p:ajax event="change" listener="#{courseController.onScoreChange}" update="@form:score_table"></p:ajax>
            </p:inputText>
         </h:panelGrid>
      </p:dialog>
   </h:form>
</h:body>
</html>
